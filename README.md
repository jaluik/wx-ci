# wx-ci <img src="https://img.shields.io/badge/wx--ci-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%87%AA%E5%8A%A8%E5%8C%96%E8%84%9A%E6%9C%AC-green">

[![author](https://img.shields.io/badge/author-jaluik-f66.svg)](https://github.com/jaluik/wx-ci)
[![node](https://img.shields.io/badge/node-%3E%3D%206.9.0-3c9.svg)](https://github.com//jaluik/wx-ci)
[![npm](https://img.shields.io/badge/npm-%3E%3D%204.5.0-3c9.svg)](https://github.com/jaluik/wx-ci)
[![license](https://img.shields.io/badge/license-MIT-09f.svg)](https://github.com/JowayYoung/jaluik/wx-ci)

å°ç¨‹åºä¸€é”®ä¸Šä¼ è„šæœ¬ï¼Œå¼€å‘è€…å¯ä¸æ‰“å¼€å°ç¨‹åºå¼€å‘è€…å·¥å…·ï¼Œç‹¬ç«‹ä½¿ç”¨ wx-ci è¿›è¡Œå°ç¨‹åºä»£ç çš„æ‰“åŒ…ã€ä¸Šä¼ ç­‰æ“ä½œã€‚

## å®‰è£…

### æ–¹å¼ä¸€ï¼šå…¨å±€å®‰è£…ï¼ˆ**æ¨è**ï¼‰

ä½¿ç”¨å‰ä½ éœ€è¦å®‰è£… `wx-ci`è„šæ‰‹æ¶å·¥å…·:

```console
npm install wx-ci -g
```

æˆ–è€…

```console
yarn global add wx-ci
```

æŸ¥çœ‹ç‰ˆæœ¬ï¼Œè¡¨ç¤ºå®‰è£…æˆåŠŸ

```console
wx-ci -v
```

### æ–¹å¼äºŒï¼šæœ¬åœ°å®‰è£…

```console
npm install wx-ci --save-dev
```

æˆ–è€…

```console
yarn  add wx-ci -D
```

æŸ¥çœ‹ç‰ˆæœ¬ï¼Œè¡¨ç¤ºå®‰è£…æˆåŠŸ

```console
npx wx-ci -v
```

## å¿«é€Ÿå¼€å§‹

å¿«é€Ÿç”Ÿæˆé…ç½®æ–‡ä»¶

```console
wx-ci init
```

æ‰§è¡Œå®Œæˆåï¼Œä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆ wxci.config.js é…ç½®æ–‡ä»¶ï¼Œ**å„å‚æ•°å«ä¹‰å‡æœ‰å¤‡æ³¨ï¼Œä¹Ÿå¯å‚è€ƒæœ¬æ–‡æ¡£**

åœ¨ package.json åŒçº§ç›®å½•æ‰§è¡Œä¸Šä¼ æµç¨‹

```console
wx-ci
```

æ‰§è¡Œè¿™æ®µè„šæœ¬ï¼Œå¦‚æœæœ€åæç¤ºä¸Šä¼ æˆåŠŸï¼Œæ­å–œï¼Œå°ç¨‹åºå·²ç»æˆåŠŸä¸Šä¼ å•¦ï¼

## å¯ç”¨é…ç½®

ä½ å¯ä»¥æ ¹æ®é¡¹ç›®éœ€è¦æ‰‹åŠ¨ä¿®æ”¹`wx-ci`.
å¯é…ç½®é€‰é¡¹å¦‚ä¸‹
|å­—æ®µå|ç±»å‹|å¿…å¡«|é»˜è®¤å€¼|æè¿°|
|:--:|:--:|:-----:|:--------:|:----------:|
|**`title`**|`{String}`|false|æ­£åœ¨ä¸Šä¼ å°ç¨‹åº|æ˜¾ç¤ºä¸Šä¼ æ ‡é¢˜è¯­å¥|
|**`appid`**|`{String}`|true|-|å°ç¨‹åº appid|
|**`type`**|`{String}`|true|miniProgram|è¯·å‹¿ä¿®æ”¹|
|**`projectPath`**|`{String}`|true|dist|å°ç¨‹åºç”Ÿæˆç›®å½•|
|**`privateKeyPath`**|`{String}`|true|miniprogram.upload.key|å°ç¨‹åºé’¥åŒ™ç›®å½•ï¼Œéœ€è¦åœ¨å°ç¨‹åºåå°ä¸‹è½½|
|**`preCommand`**|`command[]`|false|[]|ä¸Šä¼ å°ç¨‹åºæºç å‰æ‰§è¡Œçš„è„šæœ¬|
|**`version`**|`{String}`|false|1.0.0|å°ç¨‹åºé»˜è®¤ä¸Šä¼ çš„ç‰ˆæœ¬å·(ä¸Šä¼ æ—¶å¯ä¿®æ”¹)|
|**`desc`**|`{String}`|false|{m}æœˆ{day}æ—¥æ›´æ–°|å°ç¨‹åºé»˜è®¤ä¸Šä¼ çš„å¤‡æ³¨ä¿¡æ¯(ä¸Šä¼ æ—¶å¯ä¿®æ”¹)|
|**`setting`**|`setting`|false|{}|å°ç¨‹åºæ¯æ¬¡ä¸Šä¼ çš„é¡¹ç›®é…ç½®ä¿¡æ¯|

`command`å¯é…ç½®é€‰é¡¹å¦‚ä¸‹

|    å­—æ®µå     |    ç±»å‹    | å¿…å¡«  | é»˜è®¤å€¼ |      æè¿°      |
| :-----------: | :--------: | :---: | :----: | :------------: |
| **`command`** | `{String}` | true  |   -    |   æ‰§è¡Œçš„å‘½ä»¤   |
|  **`desc`**   | `{String}` | false |   -    | æ‰§è¡Œå‘½ä»¤çš„æè¿° |

`setting`å¯é…ç½®é€‰é¡¹å¦‚ä¸‹

|        å­—æ®µå        |    ç±»å‹     | å¿…å¡«  | é»˜è®¤å€¼ |                            æè¿°                             |
| :------------------: | :---------: | :---: | :----: | :---------------------------------------------------------: |
|      **`es6`**       | `{boolean}` | false |  true  |          å¯¹åº”äºå¾®ä¿¡å¼€å‘è€…å·¥å…·çš„ "es6 è½¬ es6" es5"           |
|      **`es7`**       | `{boolean}` | false | false  |              å¯¹åº”äºå¾®ä¿¡å¼€å‘è€…å·¥å…·çš„ "å¢å¼ºç¼–è¯‘"              |
|    **`minifyJS`**    | `{boolean}` | false | false  |                     ä¸Šä¼ æ—¶å‹ç¼© JS ä»£ç                       |
|   **`minifyWXML`**   | `{boolean}` | false | false  |                    ä¸Šä¼ æ—¶å‹ç¼© WXML ä»£ç                      |
|   **`minifyWXSS`**   | `{boolean}` | false | false  |                    ä¸Šä¼ æ—¶å‹ç¼© WXSS ä»£ç                      |
|     **`minify`**     | `{boolean}` | false | false  | ä¸Šä¼ æ—¶å‹ç¼©æ‰€æœ‰ä»£ç ï¼Œå¯¹åº”äºå¾®ä¿¡å¼€å‘è€…å·¥å…·çš„ "ä¸Šä¼ æ—¶å‹ç¼©ä»£ç " |
|  **`codeProtect`**   | `{boolean}` | false | false  |         å¯¹åº”äºå¾®ä¿¡å¼€å‘è€…å·¥å…·çš„ "ä¸Šä¼ æ—¶è¿›è¡Œä»£ç ä¿æŠ¤"         |
| **`autoPrefixWXSS`** | `{boolean}` | false | false  |         å¯¹åº”äºå¾®ä¿¡å¼€å‘è€…å·¥å…·çš„ "ä¸Šä¼ æ—¶æ ·å¼è‡ªåŠ¨è¡¥å…¨"         |

é»˜è®¤é…ç½®è¡¨å¦‚ä¸‹:

```js
module.exports = {
  /** ---åŸºç¡€é…ç½®-- */
  //æ˜¾ç¤ºä¸Šä¼ æ ‡é¢˜è¯­å¥
  title: '----------æ­£åœ¨ä¸Šä¼ å°ç¨‹åº----------',
  //å°ç¨‹åºappid
  appid: '',
  type: 'miniProgram',
  //å°ç¨‹åºç”Ÿæˆç›®å½•
  projectPath: 'dist',
  //å°ç¨‹åºé’¥åŒ™ç›®å½•
  privateKeyPath: 'miniprogram.upload.key',
  /** ---ä¸Šä¼ å‰æ‰§è¡Œè„šæœ¬-- */
  preCommand: [
    {
      command: 'yarn',
      desc: 'å®‰è£…ä¾èµ–',
    },
    {
      command: 'yarn build',
      desc: 'æ‰“åŒ…',
    },
  ],
  /** ---ä¸Šä¼ é…ç½®-- */
  //å°ç¨‹åºè‡ªå®šä¹‰ç‰ˆæœ¬å·
  version: '',
  //å°ç¨‹åºè‡ªå®šä¹‰å¤‡æ³¨
  desc: '',
  //ç¼–è¯‘è®¾ç½®
  setting: {
    //å¯¹åº”äºå¾®ä¿¡å¼€å‘è€…å·¥å…·çš„ "es6 è½¬ es5"
    es6: true,
    //å¯¹åº”äºå¾®ä¿¡å¼€å‘è€…å·¥å…·çš„ "å¢å¼ºç¼–è¯‘"
    es7: false,
    //ä¸Šä¼ æ—¶å‹ç¼© JS ä»£ç 
    minifyJS: false,
    //ä¸Šä¼ æ—¶å‹ç¼© WXML ä»£ç 
    minifyWXML: false,
    //ä¸Šä¼ æ—¶å‹ç¼© WXSS ä»£ç 
    minifyWXSS: false,
    //ä¸Šä¼ æ—¶å‹ç¼©æ‰€æœ‰ä»£ç ï¼Œå¯¹åº”äºå¾®ä¿¡å¼€å‘è€…å·¥å…·çš„ "ä¸Šä¼ æ—¶å‹ç¼©ä»£ç "
    minify: true,
    //å¯¹åº”äºå¾®ä¿¡å¼€å‘è€…å·¥å…·çš„ "ä¸Šä¼ æ—¶è¿›è¡Œä»£ç ä¿æŠ¤"
    codeProtect: false,
    //å¯¹åº”äºå¾®ä¿¡å¼€å‘è€…å·¥å…·çš„ "ä¸Šä¼ æ—¶æ ·å¼è‡ªåŠ¨è¡¥å…¨"
    autoPrefixWXSS: false,
  },
};
```

### ç‰ˆæƒ

MIT Â© [jaluik](https://github.com/jaluik)

å¦‚æœä½ è§‰å¾—è¿™ä¸ªè„šæœ¬å¯¹ä½ æœ‰ç”¨ï¼Œç»™ä¸ª Star ğŸ˜„
